{% extends '/includes/boiler.html' %} {% block title %}Jewelry Price Estimator
-GoldGlanz{% endblock %} {% block content %}
<div class="bg-light py-5">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="card shadow-lg border-0">
          <div class="card-header bg-gold text-white text-center py-4">
            <h2 class="font-playfair mb-0">
              <i class="fas fa-calculator me-2"></i>Get Your Jewelry Price
              Estimate
            </h2>
            <p class="mb-0 mt-2">Professional valuation in minutes</p>
          </div>

          <div class="card-body p-4">
            <form id="estimateForm" class="needs-validation" novalidate>
              <!-- Jewelry Type -->
              <div class="mb-4">
                <label for="type" class="form-label fw-semibold">
                  <i class="fas fa-ring me-2 text-gold"></i>Jewelry Type
                </label>
                <select
                  class="form-select form-select-lg"
                  name="type"
                  id="type"
                  required
                >
                  <option value="">Select jewelry type...</option>
                  <option value="Ring">Ring</option>
                  <option value="Necklace">Necklace</option>
                  <option value="Bracelet">Bracelet</option>
                  <option value="Earrings">Earrings</option>
                  <option value="Pendant">Pendant</option>
                  <option value="Chain">Chain</option>
                  <option value="Watch">Watch</option>
                </select>
                <div class="invalid-feedback">
                  Please select a jewelry type.
                </div>
              </div>

              <!-- Material -->
              <div class="mb-4">
                <label for="material" class="form-label fw-semibold">
                  <i class="fas fa-gem me-2 text-gold"></i>Material
                </label>
                <select
                  class="form-select form-select-lg"
                  id="material"
                  required
                  onchange="updateCaratOptions()"
                  name="material"
                >
                  <option value="">Select material...</option>
                  <option value="Gold">Gold</option>
                  <option value="Silver">Silver</option>
                </select>
                <div class="invalid-feedback">Please select a material.</div>
              </div>

              <!-- Carat/Purity -->
              <div class="mb-4" id="caratDiv">
                <label for="carat" class="form-label fw-semibold">
                  <i class="fas fa-award me-2 text-gold"></i>Purity/Carat
                </label>
                <select
                  class="form-select form-select-lg"
                  name="carat"
                  id="carat"
                >
                  <option value="">Select purity...</option>
                  <option value="16k">16k</option>
                  <option value="18k">18k</option>
                  <option value="20k">20k</option>
                  <option value="22k">22k</option>
                </select>
                <div class="form-text">
                  Higher carat means higher gold content and value
                </div>
              </div>

              <!-- Weight -->
              <div class="mb-4">
                <label for="weight" class="form-label fw-semibold">
                  <i class="fas fa-weight me-2 text-gold"></i>Weight (grams)
                </label>
                <input
                  type="number"
                  class="form-control form-control-lg"
                  id="weight"
                  min="0.1"
                  step="0.1"
                  placeholder="Enter weight in grams"
                  required
                  name="weight"
                />
                <div class="invalid-feedback">Please enter a valid weight.</div>
                <div class="form-text">
                  If you don't know the exact weight, an approximate value is
                  fine
                </div>
              </div>

              <!-- User Expectation -->
              <!-- <div class="mb-4">
                <label for="userExpectation" class="form-label fw-semibold">
                  <i class="fas fa-dollar-sign me-2 text-gold"></i>Your Price
                  Expectation (Optional)
                </label>
                <input
                  type="number"
                  class="form-control form-control-lg"
                  id="userExpectation"
                  min="1"
                  placeholder="Enter your expected price in USD"
                />
                <div class="form-text">
                  This helps us provide more accurate estimates
                </div>
              </div> -->

              <!-- Submit Button -->
              <div class="d-grid gap-2">
                <button
                  type="button"
                  class="btn btn-gold btn-lg py-3"
                  onclick="calculateEstimate()"
                >
                  <i class="fas fa-calculator me-2"></i>Calculate Estimate
                </button>
              </div>
            </form>

            <!-- Result Section -->
            <div
              id="resultSection"
              class="mt-5 p-4 bg-light rounded"
              style="display: none"
            >
              <h4 class="text-gold font-playfair mb-3">
                <i class="fas fa-chart-line me-2"></i>Your Jewelry Estimate
              </h4>
              <div class="row">
                <div class="col-md-6">
                  <div class="card bg-white border-0 shadow-sm">
                    <div class="card-body text-center">
                      <h5 class="text-gold">Estimated Value</h5>
                      <h2
                        class="text-dark font-playfair"
                        id="estimatedPrice"
                      ></h2>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card bg-white border-0 shadow-sm">
                    <div class="card-body text-center">
                      <h5 class="text-gold">Market Range</h5>
                      <p class="text-dark h4" id="priceRange">$0 - $0</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="mt-4 p-3 bg-white rounded">
                <h6 class="text-gold">Estimation Details:</h6>
                <div id="estimationDetails"></div>
              </div>
              <div class="mt-4 text-center">
                <p class="text-muted">
                  Want a professional appraisal?
                  <a href="/contact" class="text-gold">Contact our experts</a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function updateCaratOptions() {
    const material = document.getElementById("material").value;
    const caratDiv = document.getElementById("caratDiv");
    const caratSelect = document.getElementById("carat");

    caratSelect.innerHTML = '<option value="">Select purity...</option>';

    if (material === "Gold") {
      caratDiv.style.display = "block";
      caratSelect.innerHTML += `
            <option value="16k">16K (66.7% gold)</option>
            <option value="18k">18K (75% gold)</option>
            <option value="20k">20K (83.3% gold)</option>
            <option value="22k">22K (91.7% gold)</option>
        `;
    } else if (material === "Silver") {
      caratDiv.style.display = "block";
      caratSelect.innerHTML += `
            <option value="800">800 Silver (80% silver)</option>
            <option value="925">925 Sterling Silver (92.5% silver)</option>
            <option value="950">950 Silver (95% silver)</option>
            <option value="999">999 Fine Silver (99.9% silver)</option>
        `;
    } else {
      caratDiv.style.display = "";
    }
  }

  function calculateEstimate() {
    const form = document.getElementById("estimateForm");

    // Validate form
    if (!form.checkValidity()) {
      form.classList.add("was-validated");
      return;
    }

    const type = document.getElementById("type").value;
    const material = document.getElementById("material").value;
    const carat = document.getElementById("carat").value;
    const weight = parseFloat(document.getElementById("weight").value);

    // Base prices per gram (approximate market values)
    const basePrices = {
      Gold: { "16k": 6752, "18k": 7419, "20k": 8440, "22k": 9284 },
      Silver: { 800: 0.8, 925: 1.0, 950: 1.2, 999: 1.5 },
    };

    // let basePrice = 0;

    // Type multipliers
    const typeMultipliers = {
      Ring: 1.2,
      Necklace: 1.3,
      Bracelet: 1.1,
      Earrings: 1.4,
    };

    let purityPrice = basePrices[material][carat] || 0;
    let multiplier = typeMultipliers[type] || 1;

    let estimatedPrice = weight * purityPrice * multiplier;
    let minPrice = estimatedPrice * 0.9;
    let maxPrice = estimatedPrice * 1.1;

    // Display results
    document.getElementById("estimatedPrice").textContent = `₹${Math.round(
      estimatedPrice
    )}`;
    document.getElementById("priceRange").textContent = `₹${Math.round(
      minPrice
    )} - ₹${Math.round(maxPrice)}`;

    // Show estimation details
    const detailsHtml = `
        <div class="row">
            <div class="col-md-6">
                <small class="text-muted">Material:</small> <strong>${material}</strong><br>
                <small class="text-muted">Purity:</small> <strong>${
                  carat || "N/A"
                }</strong><br>
                <small class="text-muted">Weight:</small> <strong>${weight}g</strong>
            </div>
            <div class="col-md-6">
                <small class="text-muted">Type:</small> <strong>${type}</strong><br>
            </div>
        </div>
    `;

    document.getElementById("estimationDetails").innerHTML = detailsHtml;
    document.getElementById("resultSection").style.display = "block";

    // Scroll to results
    document
      .getElementById("resultSection")
      .scrollIntoView({ behavior: "smooth" });
  }
</script>
{% endblock %}
